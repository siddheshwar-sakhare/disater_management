<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resources - Disaster Response</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-image: url('https://via.placeholder.com/1920x1080'); /* Replace with your image URL */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #333;
        }

        .navbar {
            background-color: rgba(44, 62, 80, 0.9) !important; /* Semi-transparent navbar */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .navbar-brand {
            font-weight: 600;
            color: #ecf0f1 !important;
        }

        .navbar-brand:hover {
            color: #1abc9c !important;
        }

        .nav-link {
            color: #ecf0f1 !important;
            font-weight: 500;
        }

        .nav-link:hover {
            color: #1abc9c !important;
        }

        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeInUp 0.5s ease;
            background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white background */
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .btn-success {
            background-color: #1abc9c;
            border: none;
            font-weight: 600;
            padding: 10px 20px;
            transition: background-color 0.3s ease;
        }

        .btn-success:hover {
            background-color: #16a085;
        }

        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 10px;
            font-size: 14px;
        }

        .form-control:focus, .form-select:focus {
            border-color: #1abc9c;
            box-shadow: 0 0 0 3px rgba(26, 188, 156, 0.1);
        }

        .text-primary {
            color: #1abc9c !important;
        }

        .text-muted {
            color: #777 !important;
        }

        .container {
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white background */
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        #resourceForm {
            background-color: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        #resourceForm.show {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .resource-card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeInUp 0.5s ease;
            background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white background */
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .resource-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 12px 12px 0 0;
        }

        .stat-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-card i {
            font-size: 2rem;
            color: #1abc9c;
        }

        .stat-card h3 {
            margin-top: 10px;
            font-size: 1.5rem;
            color: #2c3e50;
        }

        .stat-card p {
            color: #777;
        }

        .progress {
            height: 20px;
            border-radius: 10px;
            background-color: #e9ecef;
        }

        .progress-bar {
            background-color: #1abc9c;
            border-radius: 10px;
        }

        .testimonial-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .testimonial-card img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .footer {
            background-color: rgba(44, 62, 80, 0.9);
            color: #ecf0f1;
            padding: 20px 0;
            margin-top: 40px;
            text-align: center;
        }

        .footer a {
            color: #1abc9c;
            text-decoration: none;
        }

        .footer a:hover {
            color: #16a085;
        }
    </style>
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/}">Disaster Response</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/}">Home</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/incidents}">Incidents</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/resources}">Resources</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/volunteers}">Volunteers</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/shelters}">Shelters</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/disaster-report}">Report</a></li>

            </ul>
        </div>
    </div>
</nav>

<!-- Main Content -->
<div class="container mt-4">
    <h2 class="text-primary">Resources</h2>

    <!-- Add Resource Button -->
    <button class="btn btn-success mb-3" onclick="showForm()">+ Add Resource</button>

    <!-- Resource Form (Hidden Initially) -->
    <div id="resourceForm" class="card">
        <h5 class="card-title text-primary mb-3">Add New Resource</h5>
        <form th:action="@{/api/resources}" method="post">
            <div class="mb-3">
                <label class="form-label">Type</label>
                <input type="text" name="type" class="form-control" placeholder="Food, Water, Medical Supplies" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Quantity</label>
                <input type="number" name="quantity" class="form-control" placeholder="Quantity of Resource" required>
            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>

    <!-- Resource Statistics -->
    <h3 class="mt-4 text-primary">Resource Statistics</h3>
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="stat-card">
                <i class="fas fa-utensils"></i>
                <h3>1,200</h3>
                <p>Meals Provided</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card">
                <i class="fas fa-tint"></i>
                <h3>5,000 L</h3>
                <p>Water Distributed</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card">
                <i class="fas fa-medkit"></i>
                <h3>300+</h3>
                <p>Medical Kits Delivered</p>
            </div>
        </div>
    </div>

    <!-- Interactive Charts -->
    <h3 class="mt-4 text-primary">Resource Distribution</h3>
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="barChart"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Donation Progress Bar -->
    <h3 class="mt-4 text-primary">Donation Progress</h3>
    <div class="card mb-4">
        <div class="card-body">
            <h5>Goal: $10,000</h5>
            <div class="progress">
                <div class="progress-bar" style="width: 65%;">65%</div>
            </div>
            <p class="mt-2">$6,500 raised so far.</p>
        </div>
    </div>

    <!-- List of Resources -->
    <h3 class="mt-4 text-primary">Available Resources</h3>
    <div class="row" id="resourceList">
        <!-- Resources will be inserted here dynamically -->
    </div>

    <!-- Testimonials Section -->
    <h3 class="mt-4 text-primary">Testimonials</h3>
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="testimonial-card">
                <img src="https://via.placeholder.com/60" alt="John Doe">
                <h5>John Doe</h5>
                <p>"I donated blankets, and it feels great to help those in need. Thank you for making it easy!"</p>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="testimonial-card">
                <img src="https://via.placeholder.com/60" alt="Jane Smith">
                <h5>Jane Smith</h5>
                <p>"The team is doing an amazing job. Iâ€™m proud to be part of this initiative."</p>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <p>Follow us on:
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
        </p>
        <p>Contact us: <a href="mailto:info@disasterresponse.org">info@disasterresponse.org</a></p>
    </div>
</footer>

<script>
    function showForm() {
        const form = document.getElementById("resourceForm");
        form.classList.toggle("show");
    }

    // Bar Chart
    const barCtx = document.getElementById('barChart').getContext('2d');
    new Chart(barCtx, {
        type: 'bar',
        data: {
            labels: ['Food', 'Water', 'Medical Supplies', 'Blankets', 'Tents'],
            datasets: [{
                label: 'Quantity',
                data: [500, 1000, 200, 300, 150],
                backgroundColor: '#1abc9c',
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Pie Chart
    const pieCtx = document.getElementById('pieChart').getContext('2d');
    new Chart(pieCtx, {
        type: 'pie',
        data: {
            labels: ['Food', 'Water', 'Medical Supplies'],
            datasets: [{
                data: [500, 1000, 200],
                backgroundColor: ['#1abc9c', '#16a085', '#2c3e50'],
            }]
        }
    });
    // Fetch resources from the API and display them below the 'resourceList' element
document.addEventListener("DOMContentLoaded", function() {
    fetch('/api/resources')
        .then(response => response.json())
        .then(resources => {
            const resourceListContainer = document.getElementById('resourceList'); // Select the resourceList section

            // Loop through each resource and create the HTML for each one
            resources.forEach(resource => {
                const resourceItem = document.createElement('div');
                resourceItem.classList.add('col-md-4', 'mb-4');

                resourceItem.innerHTML = `
                    <div class="resource-card">
                        <img src="/img/resource.png" alt="${resource.type}" class="resource-image"> <!-- Update image path accordingly -->
                        <div class="card-body">
                            <h5 class="card-title text-primary">${resource.type}</h5>
                            <p><strong>Quantity:</strong> ${resource.quantity}</p>
                        </div>
                    </div>
                `;

                resourceListContainer.appendChild(resourceItem);
            });
        })
        .catch(error => console.error('Error fetching resources:', error));
});

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>